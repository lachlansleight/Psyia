// We need to manually mark what our kernel names are
#pragma kernel EmitFunction

struct ParticleData {
	float3 pos;
	float3 velocity;
	float4 color;
	int isAlive;
};

RWStructuredBuffer<ParticleData> outputBuffer;
ConsumeStructuredBuffer<uint> deadList;

[numthreads(1,1,1)]
void EmitFunction() {
	uint newIndex = deadList.Consume();
	outputBuffer[newIndex].isAlive = 1;
}